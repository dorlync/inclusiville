{"version":3,"sources":["app.js","calendar.js","../../../../node_modules/calendar/lib/calendar.js","card-slider.js","custom-form-controls.js","faq.js","form-collapsible-section.js","form-selectable-label.js","header.js","hero.js","image-slider.js","maps.js","popovers.js","radio-buttons.js","shuffle-grid.js","smooth-scroll.js","sticky-sidebar.js","MenubarItemLinks.js","MenubarLinks.js","PopupMenuItemLinks.js","PopupMenuLinks.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;QCXA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;ADjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AEhRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["//\n// JS Globals\n//\n\n;(function ($) {\n    // test\n    window.WPHJS = {\n        /**\n         * Replace this with your own API key. To create one please go to\n         * @link https://developers.google.com/maps/documentation/javascript/get-api-key\n         */\n        GOOGLE_MAPS_API_KEY: 'AIzaSyBVrrJLTmmDoRk5nCE3xglH496gj1Ff-gE',\n\n        /**\n         * Calculates the height of specified element's children\n         *\n         * @param elem HTMLElement\n         * @returns {number}\n         */\n        childrenTotalHeight: function (elem) {\n            var result = 0;\n\n            $(elem).find('> *').each(function () {\n                result += $(this).outerHeight();\n            });\n\n            return result;\n        },\n\n        /**\n         * Retrieves current outer width of container\n         *\n         * @return {number}\n         */\n        getContainerOuterWidth: function () {\n            var $container = $('<div class=\"container\"/>').appendTo($('body'));\n            var containerWidth = $container.outerWidth();\n            $container.remove();\n            return containerWidth;\n        },\n\n        /**\n         * Retrieves current inner width of container\n         *\n         * @return {number}\n         */\n        getContainerInnerWidth: function () {\n            var $container = $('<div class=\"container\"><div></div></div>').appendTo($('body'));\n            var containerWidth = $container.find('> div').outerWidth();\n            $container.remove();\n            return containerWidth;\n        }\n    };\n})(jQuery);\n",null,"/*!\n * calendar.js: inspired by the calendar module from Python\n * Copyright(c) 2011 Luciano Ramalho <luciano@ramalho.org>\n * MIT Licensed\n */\n\nexports.version = '0.1.0';\n\nvar CalendarException = function CalendarException(message) {\n   this.message = message;\n   this.toString = function() {\n      return this.constructor.name + \": \" + this.message\n   };\n}\n\nvar Calendar = function Calendar(firstWeekDay) {\n    //properties\n    this.firstWeekDay = firstWeekDay || 0; // 0 = Sunday\n};\n\nCalendar.prototype = {\n    constructor : Calendar,\n    weekStartDate : function weekStartDate(date) {\n        var startDate = new Date(date.getTime());\n        while (startDate.getDay() !== this.firstWeekDay) {\n            startDate.setDate(startDate.getDate() - 1);\n        }\n        return startDate;\n    },\n    monthDates : function monthDates(year, month, dayFormatter, weekFormatter) {\n        if ((typeof year !== \"number\") || (year < 1970)) {\n            throw new CalendarException('year must be a number >= 1970');\n        };\n        if ((typeof month !== \"number\") || (month < 0) || (month > 11)) {\n            throw new CalendarException('month must be a number (Jan is 0)');\n        };\n        var weeks = [],\n            week = [],\n            i = 0,\n            date = this.weekStartDate(new Date(year, month, 1));\n        do {\n            for (i=0; i<7; i++) {\n                week.push(dayFormatter ? dayFormatter(date) : date);\n                date = new Date(date.getTime());\n                date.setDate(date.getDate() + 1);\n            }\n            weeks.push(weekFormatter ? weekFormatter(week) : week);\n            week = [];\n        } while ((date.getMonth()<=month) && (date.getFullYear()===year));\n        return weeks;\n    },\n    monthDays : function monthDays(year, month) {\n        var getDayOrZero = function getDayOrZero(date) {\n            return date.getMonth() === month ? date.getDate() : 0;\n        };\n        return this.monthDates(year, month, getDayOrZero);\n    },\n    monthText : function monthText(year, month) {\n        if (typeof year === \"undefined\") {\n            var now = new Date();\n            year = now.getFullYear();\n            month = now.getMonth();\n        };\n        var getDayOrBlank = function getDayOrBlank(date) {\n            var s = date.getMonth() === month ? date.getDate().toString() : \"  \";\n            while (s.length < 2) s = \" \"+s;\n            return s;\n        };\n        var weeks = this.monthDates(year, month, getDayOrBlank,\n            function (week) { return week.join(\" \") });\n        return weeks.join(\"\\n\");\n    }\n};\nvar months = \"JAN FEB MAR APR MAY JUN JUL AUG SEP OCT NOV DEC\".split(\" \");\nfor (var i=0; i<months.length; i++)\n    Calendar[months[i]] = i;\n\nexports.Calendar = Calendar;\n","//\n// Card slider\n//\n\n;(function ($) {\n    'use strict';\n\n    var $sliders = $('.card-slider');\n\n    // helper function to set viewport padding\n    var processSliderViewportMode = function (e) {\n        var containerInnerWidth = WPHJS.getContainerInnerWidth(),\n            windowWidth = $(window).outerWidth(),\n            isFlickityReady = e.type === 'ready' && e.namespace === 'flickity',\n            gapValue = windowWidth < 576 ? 0 : (windowWidth - containerInnerWidth) / 2;\n\n        $(this).find('.card-slider-item:first').css('padding-left', gapValue);\n        $(this).find('.card-slider-item:last').css('padding-right', gapValue);\n        $(this).css({\n            marginLeft: -1 * gapValue,\n            marginRight: -1 * gapValue\n        });\n\n        if ($(this).data('flickity')) {\n            $(this).flickity('resize');\n        } else if (isFlickityReady) {\n            var that = this;\n            setTimeout(function () {\n                $(that).flickity('resize');\n            }, 0);\n        }\n    };\n\n    // set proper initial values for viewport sliders\n    $sliders.filter('.card-slider-viewport').on('ready.flickity', processSliderViewportMode);\n\n    // set proper processing for viewport sliders\n    $(window).on('resize', function () {\n        $sliders.filter('.card-slider-viewport').each(processSliderViewportMode);\n    });\n\n    // support for external controls\n    $('[data-target][data-action][data-toggle=\"card-slider\"]').each(function () {\n        var $control = $(this),\n            $slider = $($control.data('target')),\n            action = $control.data('action');\n\n        // attach event listeners for proper actions\n        if (action === 'prevSlide') {\n            $control.on('click', function (e) {\n                e.preventDefault();\n                $slider.flickity('previous');\n            });\n        } else if (action === 'nextSlide') {\n            $control.on('click', function (e) {\n                e.preventDefault();\n                $slider.flickity('next');\n            });\n        }\n\n        // maintain proper disabled/enabled state for controls\n        $slider.on('ready.flickity change.flickity', function () {\n            var that = this;\n            setTimeout(function () { // schedule code for next tick when `data('flickity')` will be available\n                var flky = $(that).data('flickity');\n                var lastIndex = flky.slides.length ? flky.slides.length - 1 : 0;\n                var boundIndex = (action === 'prevSlide') ? 0 : lastIndex;\n                $control.toggleClass('disabled', !flky.options.wrapAround && flky.selectedIndex === boundIndex);\n                $control.prop('disabled', !flky.options.wrapAround && flky.selectedIndex === boundIndex);\n            }, 0);\n        });\n    });\n\n    // link all external controls\n    $('[data-target][data-control=\"card-slider-dots\"]').each(function () {\n        var $control = $(this),\n            $slider = $($control.data('target'));\n\n        $slider.on('ready.flickity change.flickity', function () {\n            var that = this;\n            setTimeout(function () { // schedule code for next tick when `data('flickity')` will be available\n                var flky = $(that).data('flickity');\n                $control.html('<ul class=\"card-slider-dots\"></ul>'); // reset element state\n                var $dotsContainer = $control.find('.card-slider-dots');\n                for (var i = 0; i < flky.slides.length; i++) {\n                    var $dot = $('<li class=\"card-slider-dot\"/>');\n                    $dot.append($('<a href=\"#\"/>').data('index', i).text(i + 1));\n                    if (i === flky.selectedIndex) {\n                        $dot.addClass('card-slider-dot-active');\n                    }\n                    $dotsContainer.append($dot);\n                }\n                $control.find('a').on('click', function (e) {\n                    e.preventDefault();\n                    flky.select($(this).data('index'));\n                });\n            }, 0);\n        });\n    });\n\n    // instantiate plugin\n    $sliders.each(function() {\n        $(this).flickity($.extend({\n            imagesLoaded: true,\n            watchCSS: true,\n            groupCells: true,\n            percentPosition: false,\n            cellAlign: 'left',\n            sellSelector: '.card-slider-item',\n            prevNextButtons: false,\n            pageDots: false,\n            contain: true\n        }, $(this).data('options')));\n    });\n})(jQuery);\n","//\n// Styled checkboxes and radios\n//\n\n;(function ($) {\n    'use strict';\n\n    var $allControls = $('.custom-checkbox, .custom-radio');\n\n    $allControls.each(function () {\n        var $nativeControl = $(this),\n            classPrefix = 'custom-' + $nativeControl.attr('type'),\n            $wrap = $('<div/>', {class: classPrefix + '-wrap'}),\n            $fakeInput = $('<div/>', {class: classPrefix + '-presenter'});\n\n        $nativeControl.wrap($wrap);\n        $wrap = $nativeControl.parent();\n        $wrap.append($fakeInput);\n\n        $nativeControl.on('refresh', function (e) {\n            e.stopPropagation();\n\n            if ($nativeControl.prop('checked')) {\n                $wrap.addClass('checked');\n            } else {\n                $wrap.removeClass('checked');\n            }\n        });\n\n        $nativeControl.on('change', function () {\n            $allControls.trigger('refresh');\n        });\n\n        $fakeInput.on('click', function (e) {\n            e.stopPropagation();\n\n            if ($nativeControl.attr('type') === 'radio') {\n                $nativeControl.prop('checked', true);\n            } else {\n                $nativeControl.prop('checked', !$nativeControl.prop('checked'));\n            }\n\n            $nativeControl.trigger('change');\n        });\n\n        $nativeControl.trigger('change');\n    });\n\n})(jQuery);","//\n// FAQ block\n//\n\n;(function ($) {\n    'use strict';\n\n    $('.faq')\n        .on('hide.bs.collapse', function () {\n            $(this).removeClass('faq-open');\n        })\n        .on('show.bs.collapse', function () {\n            $(this).addClass('faq-open');\n        });\n\n})(jQuery);","//\n// Form section\n//\n\n;(function ($) {\n    'use strict';\n\n    $('.form-collapsible-section')\n        .each(function () {\n            var $section = $(this),\n                $sectionHead = $section.find('.form-collapsible-section-head'),\n                $sectionBody = $section.find('.form-collapsible-section-body');\n\n            $sectionHead.on('click', function () {\n                $sectionBody.collapse('toggle');\n            });\n\n            $sectionBody.addClass('collapse');\n\n            if ($section.attr('aria-expanded') === 'true') {\n                $sectionBody.addClass('show');\n            }\n        })\n        .on('hide.bs.collapse', function () {\n            $(this).attr('aria-expanded', false);\n        })\n        .on('show.bs.collapse', function () {\n            $(this).attr('aria-expanded', true);\n        });\n\n})(jQuery);","//\n// Form control selectable\n//\n\n;(function ($) {\n    'use strict';\n\n    var inputs = [];\n\n    $('.form-selectable-label[data-input]')\n        .each(function () {\n            var selector = $(this).attr('data-input'),\n                input = document.querySelector(selector);\n\n            input && inputs.push(input);\n        })\n        .on('click', function (e) {\n            var inputSelector = $(this).attr('data-input'),\n                $input = $(inputSelector);\n\n            if ($input) {\n                if ($input.is('[type=\"radio\"]')) {\n                    $input.prop('checked', true);\n                } else {\n                    $input.prop('checked', !$input.prop('checked'));\n                }\n\n                $input.trigger('change');\n            }\n        });\n\n    var processInput = function () {\n        var $input = $(this),\n            $container = $input.closest('.form-selectable-label');\n\n        if ($input.prop('checked')) {\n            $container.addClass('selected');\n        } else {\n            $container.removeClass('selected');\n        }\n    };\n\n    $(inputs)\n        .each(processInput)\n        .on('change', function () {\n            $(inputs).trigger('refresh');\n        })\n        .on('refresh', function (e) {\n            e.stopPropagation();\n            processInput.apply(this);\n        });\n\n})(jQuery);","//\n// Header\n//\n\n;(function ($) {\n    'use strict';\n\n    var $header = $('.header');\n    var $spacingHelper = $header.next('.header-spacing-helper');\n\n    if (!$spacingHelper.length) {\n        $spacingHelper = $('<div class=\"header-spacing-helper\"/>').insertAfter($header);\n    }\n\n    $spacingHelper.css('height', $header.outerHeight());\n\n    var $body = $('body');\n    var fn = function () {\n        if (window.scrollY > 150) {\n            $body.addClass('page-scrolled');\n        } else {\n            $body.removeClass('page-scrolled');\n        }\n    };\n\n    $(window).on('scroll', fn);\n    $(fn); // document.ready\n\n})(jQuery);","//\n// Hero block\n//\n\n;(function ($) {\n    'use strict';\n\n    // calculates height of specified element with respect of its position from the top\n    var calc_hero_height = function (hero) {\n        return Math.max(\n            $(window).outerHeight() - $(hero).position().top,\n            WPHJS.childrenTotalHeight($(hero).find('.hero-foreground'))\n        );\n    };\n\n    // sets correct 'min-height' property for all fullscreen heros on the page\n    var set_hero_height = function (hero) {\n        if ($(hero).hasClass('hero-fullscreen')) {\n            return function () {\n                hero.each(function () {\n                    $(this).css('min-height', calc_hero_height(this) + 'px');\n                });\n            };\n        } else {\n            return function () {};\n        }\n    };\n\n    // integrate all this code with jarallax and imagesLoaded\n    $('.hero').each(function () {\n        var $hero = $(this);\n\n        $hero.imagesLoaded(function () {\n            if ($hero.hasClass('jarallax')) {\n                jarallax($hero.get(0), {\n                    videoSrc: $hero.attr('data-video'),\n                    automaticResize: true,\n                    onInit: function () {\n                        $(set_hero_height($hero)); // document.ready\n                        $(window).on('resize orientationchange', set_hero_height($hero));\n                        $hero.addClass('hero-bg-ready');\n                    }\n                });\n            } else {\n                $(set_hero_height($hero)); // document.ready\n                $(window).on('resize orientationchange', set_hero_height($hero));\n                $hero.addClass('hero-bg-ready');\n            }\n        });\n    });\n})(jQuery);\n","//\n// Image slider\n//\n\n;(function ($) {\n    'use strict';\n\n    var $sliders = $('.image-slider');\n\n    // make prev and next buttons clickable\n    $sliders.find('.image-slider-prev, .image-slider-next').on('click', function (e) {\n        var $control = $(this),\n            $slider = $control.closest('.image-slider').find('.image-slider-contents');\n\n        if (typeof $slider.flickity === 'function') {\n            e.preventDefault();\n\n            if ($control.hasClass('image-slider-prev')) {\n                $slider.flickity('previous');\n            }\n\n            if ($control.hasClass('image-slider-next')) {\n                $slider.flickity('next');\n            }\n        }\n    });\n\n    // maintain proper disabled/enabled state for controls\n    $sliders.find('.image-slider-contents').on('ready.flickity change.flickity', function () {\n        var that = this,\n            $slider = $(that).closest('.image-slider'),\n            $prevControl = $slider.find('.image-slider-prev'),\n            $nextControl = $slider.find('.image-slider-next');\n\n        setTimeout(function () { // schedule code for next tick when `data('flickity')` will be available\n            var flky = $(that).data('flickity'),\n                lastIndex = flky.slides.length ? flky.slides.length - 1 : 0;\n\n            $prevControl\n                .toggleClass('disabled', (flky.selectedIndex === 0))\n                .prop('disabled', (flky.selectedIndex === 0));\n\n            $nextControl\n                .toggleClass('disabled', (flky.selectedIndex === lastIndex))\n                .prop('disabled', (flky.selectedIndex === lastIndex));\n        }, 0);\n    });\n\n    // instantiate plugin\n    $sliders.find('.image-slider-contents').flickity({\n        draggable: true,\n        imagesLoaded: true,\n        watchCSS: false,\n        groupCells: false,\n        percentPosition: false,\n        adaptiveHeight: true,\n        sellSelector: '.image-slider-item',\n        prevNextButtons: false,\n        pageDots: false,\n    });\n})(jQuery);\n","//\n// Google maps integration\n//\n\njQuery(window).one('wph.google_maps_loaded', function () {\n    'use strict';\n\n    // bail early if google maps is not loaded\n    if (typeof google === 'undefined' || typeof google.maps === 'undefined') {\n        return;\n    }\n\n    // cache variable shortcut\n    var $ = jQuery;\n\n    // select map placements\n    var $mapBlocks = $('.gmap');\n\n    // map colour theme\n    // taken from https://snazzymaps.com/style/132/light-gray\n    var gmapStyle = [{\n        featureType: 'water',\n        elementType: 'geometry.fill',\n        stylers: [{ color: '#d3d3d3' }]\n    }, {\n        featureType: 'transit',\n        stylers: [{ color: '#808080' }, { visibility: 'off' }]\n    }, {\n        featureType: 'road.highway',\n        elementType: 'geometry.stroke',\n        stylers: [{ visibility: 'on' }, { color: '#b3b3b3' }]\n    }, {\n        featureType: 'road.highway',\n        elementType: 'geometry.fill',\n        stylers: [{ color: '#ffffff' }]\n    }, {\n        featureType: 'road.local',\n        elementType: 'geometry.fill',\n        stylers: [{ visibility: 'on' }, { color: '#ffffff' }, { weight: 1.8 }]\n    }, {\n        featureType: 'road.local',\n        elementType: 'geometry.stroke',\n        stylers: [{ color: '#d7d7d7' }]\n    }, {\n        featureType: 'poi',\n        elementType: 'geometry.fill',\n        stylers: [{ visibility: 'on' }, { color: '#ebebeb' }]\n    }, {\n        featureType: 'administrative',\n        elementType: 'geometry',\n        stylers: [{ color: '#a7a7a7' }]\n    }, {\n        featureType: 'road.arterial',\n        elementType: 'geometry.fill',\n        stylers: [{ color: '#ffffff' }]\n    }, {\n        featureType: 'road.arterial',\n        elementType: 'geometry.fill',\n        stylers: [{ color: '#ffffff' }]\n    }, {\n        featureType: 'landscape',\n        elementType: 'geometry.fill',\n        stylers: [{ visibility: 'on' }, { color: '#efefef' }]\n    }, {\n        featureType: 'road',\n        elementType: 'labels.text.fill',\n        stylers: [{ color: '#696969' }]\n    }, {\n        featureType: 'administrative',\n        elementType: 'labels.text.fill',\n        stylers: [{ visibility: 'on' }, { color: '#737373' }]\n    }, { featureType: 'poi', elementType: 'labels.icon', stylers: [{ visibility: 'off' }] }, {\n        featureType: 'poi',\n        elementType: 'labels',\n        stylers: [{ visibility: 'off' }]\n    }, {\n        featureType: 'road.arterial',\n        elementType: 'geometry.stroke',\n        stylers: [{ color: '#d6d6d6' }]\n    }, { featureType: 'road', elementType: 'labels.icon', stylers: [{ visibility: 'off' }] }, {}, {\n        featureType: 'poi',\n        elementType: 'geometry.fill',\n        stylers: [{ color: '#dadada' }]\n    }\n    ];\n\n    // default rewritable map options\n    var mapDefaultOptions = {\n        zoom: 14,\n        // center:            { lat: 44.731607, lng: -72.997038 },\n        disableDefaultUI: true,\n        openFirstInfobox: true,\n        draggable: true,\n        styles: gmapStyle,\n        mapTypeId: 'roadmap'\n    };\n\n    // init maps\n    $mapBlocks.each(function () {\n        var $map = $(this).find('.gmap-embed-inner'),\n            $infoboxes = $(this).find('.gmap-infobox'),\n            custom_options = $map.data('options'),\n            parallax_speed = parseInt($(this).find('.gmap-embed').data('parallax-speed'));\n\n        var currentMapOptions = $.extend(mapDefaultOptions, custom_options);\n        var mapObj = new google.maps.Map($map.get(0), currentMapOptions);\n\n        // mapObj.addListener('bounds_changed', function () {\n        //     console.log(this.getCenter().toString());\n        // });\n\n        $($infoboxes.get().reverse()).each(function () {\n            var $infobox = $(this),\n                latLng = $infobox.data('latlng').split(' '),\n                location = { lat: parseFloat(latLng[0]), lng: parseFloat(latLng[1]) };\n\n            if (typeof currentMapOptions.center === 'undefined') {\n                mapObj.setCenter(location);\n            }\n\n            var infobox_is_open = false;\n            var infobox = new GoogleMaps_InfoBox_Factory({\n                content: $infobox.html(),\n                maxWidth: 350,\n                boxClass: 'gmap-infobox',\n                pixelOffset: new google.maps.Size(57, $infobox.find('.gmap-infobox-header').outerHeight() / 2 * -1),\n                closeBoxURL: '',\n                zIndex: 1,\n                infoBoxClearance: new google.maps.Size(32, 32),\n                enableEventPropagation: false\n            });\n\n            var marker = new google.maps.Marker({\n                position: location,\n                map: mapObj,\n                icon: {\n                    url: 'assets/images/map-marker.png',\n                    anchor: new google.maps.Point(31, 31),\n                    scaledSize: new google.maps.Size(62, 62)\n                }\n            });\n\n            marker.addListener('click', function () {\n                if (infobox_is_open) {\n                    infobox.close();\n                } else {\n                    infobox.open(mapObj, marker);\n                }\n\n                infobox_is_open = !infobox_is_open;\n            });\n        });\n\n        // enable parallax for map\n        if (parallax_speed !== 0) {\n            $map.css({\n                top: -1 * parallax_speed / 2,\n                bottom: -1 * parallax_speed / 2\n            });\n\n            $map.jarallax({\n                type: 'element',\n                speed: parallax_speed.toString() + ' 0'\n            });\n        }\n    });\n});\n\n//\n// Load google maps dependency\n//\n;(function ($) {\n    'use strict';\n\n    // avoid loading google maps if there is no map on page\n    if (!$('.gmap').length) {\n        return;\n    }\n\n    if (typeof google === 'undefined' || typeof google.maps === 'undefined') {\n        var g_api_url = 'https://maps.google.com/maps/api/js?key=' + WPHJS.GOOGLE_MAPS_API_KEY;\n\n        $.getScript(g_api_url, function () {\n            $(window).trigger('wph.google_maps_loaded');\n        });\n    } else {\n        $(window).trigger('wph.google_maps_loaded');\n    }\n\n})(jQuery);\n","//\n// Info popovers\n//\n\n;(function ($) {\n    'use strict';\n\n    $('[data-toggle=\"popover\"]').popover();\n})(jQuery);","//\n// Radio buttons control\n//\n\n;(function ($) {\n    'use strict';\n\n    $('.radio-buttons-group-disabled .btn').addClass('disabled');\n\n    $('.radio-buttons-group:not(.radio-buttons-group-disabled)').each(function () {\n        var $buttonsGroup = $(this),\n            $buttons = $buttonsGroup.find('.btn');\n\n        $buttons.on('click', function (e) {\n            e.preventDefault();\n            var $button = $(this);\n\n            $buttons.removeClass('selected');\n            $button.addClass('selected');\n\n            $buttonsGroup.trigger('change', $button.data('value'));\n        });\n    });\n\n})(jQuery);\n","//\n// ShuffleJS grid integration\n//\n\n;(function ($) {\n    'use strict';\n\n    $('.shuffle-grid')\n        .each(function () {\n            $(this).data('shufflejs-instance', new Shuffle(this, {\n                itemSelector: '.shuffle-grid-item',\n                delimiter: ','\n            }));\n        })\n        .on('set-filter.shufflejs', function (e, filterValue) {\n            var shuffle = $(this)\n                .closest('.shuffle-grid')\n                .data('shufflejs-instance');\n\n            shuffle.filter(['all', '*'].indexOf(filterValue) !== -1 ? Shuffle.ALL_ITEMS : filterValue);\n        });\n\n    // integration with radio buttons\n    $('.radio-buttons-group[data-toggle=\"shuffle-grid\"][data-target]')\n        .on('change', function (e, filterValue) {\n            var $control = $(this),\n                $shuffleGrid = $($control.data('target'));\n\n            $shuffleGrid.trigger('set-filter.shufflejs', filterValue);\n        });\n})(jQuery);\n","//\n// Smooth Scroll to anchor\n//\n\n;(function ($) {\n    'use strict';\n\n    var $header = $('.header');\n    var headerHeight = 0;\n\n    $('[data-toggle=\"smooth-scroll\"]').on('click', function (e) {\n        e.preventDefault();\n        var targetSelector = $(this).data('target') || $(this).attr('href');\n        var target = document.querySelector(targetSelector);\n\n        if ($header.css('position') === 'fixed') {\n            headerHeight = $header.outerHeight();\n        }\n\n        if (target) {\n            var scrollTop = Math.max(0, $(target).offset().top - headerHeight);\n\n            if ('scrollBehavior' in document.documentElement.style) {\n                window.scrollTo({top: scrollTop, behavior: 'smooth'});\n            } else {\n                $('html, body').animate({scrollTop: scrollTop}, 1000);\n            }\n        }\n    });\n\n})(jQuery);\n","//\n// Sticky sidebar\n//\n\n;(function ($) {\n    'use strict';\n\n    $('.sticky-sidebar').stickySidebar({\n        topSpacing:    30,\n        bottomSpacing: 30,\n        // resizeSensor:  true\n    });\n})(jQuery);","var MenubarItem = function (domNode, menuObj) {\r\n  this.menu = menuObj;\r\n  this.domNode = domNode;\r\n  this.hasFocus = false;\r\n  this.keyCode = Object.freeze({\r\n    'TAB': 9,\r\n    'RETURN': 13,\r\n    'ESC': 27,\r\n    'SPACE': 32,\r\n    'PAGEUP': 33,\r\n    'PAGEDOWN': 34,\r\n    'END': 35,\r\n    'HOME': 36,\r\n    'LEFT': 37,\r\n    'UP': 38,\r\n    'RIGHT': 39,\r\n    'DOWN': 40\r\n  });\r\n};\r\n\r\nMenubarItem.prototype.init = function () {\r\n  this.domNode.tabIndex = -1;\r\n  this.domNode.addEventListener('keydown', this.handleKeydown.bind(this));\r\n  this.domNode.addEventListener('focus', this.handleFocus.bind(this));\r\n  this.domNode.addEventListener('blur', this.handleBlur.bind(this));\r\n};\r\n\r\nMenubarItem.prototype.handleKeydown = function (event) {\r\n  switch (event.keyCode) {\r\n    //case this.keyCode.SPACE:\r\n    //case this.keyCode.RETURN:\r\n    case this.keyCode.DOWN:\r\n      this.menu.setFocusToNextItem(this);\r\n      console.log(\"keyCode.DOWN\");\r\n      break;\r\n    case this.keyCode.LEFT:\r\n      this.menu.setFocusToPreviousItem(this);\r\n      console.log(\"keyCode.LEFT\");\r\n      break;\r\n    case this.keyCode.RIGHT:\r\n      this.menu.setFocusToNextItem(this);\r\n      console.log(\"keyCode.RIGHT\");\r\n      break;\r\n    case this.keyCode.UP:\r\n      this.menu.setFocusToPreviousItem(this);\r\n      console.log(\"keyCode.UP\");\r\n      break;\r\n    case this.keyCode.HOME:\r\n    case this.keyCode.PAGEUP:\r\n      this.menu.setFocusToFirstItem();\r\n      break;\r\n    case this.keyCode.END:\r\n    case this.keyCode.PAGEDOWN:\r\n      this.menu.setFocusToLastItem();\r\n      break;\r\n    // case this.keyCode.TAB:\r\n    // case this.keyCode.ESC:\r\n    default:\r\n      break;\r\n  }\r\n};\r\n\r\nMenubarItem.prototype.handleFocus = function (event) {\r\n  this.menu.hasFocus = true;\r\n};\r\n\r\nMenubarItem.prototype.handleBlur = function (event) {\r\n  this.menu.hasFocus = false;\r\n};\r\n","var Menubar = function (domNode) {\r\n  e = domNode.firstElementChild;\r\n  while (e) {\r\n    e = e.nextElementSibling; \r\n  }\r\n  this.domNode = domNode;\r\n  this.menubarItems = []; // See Menubar init method\r\n  this.firstItem = null; // See Menubar init method\r\n  this.lastItem = null; // See Menubar init method\r\n  this.hasFocus = false; // See MenubarItem handleFocus, handleBlur\r\n};\r\n\r\nMenubar.prototype.init = function () {\r\n  var menubarItem, menuElement, numItems;\r\n  elem = this.domNode.firstElementChild;\r\n  while (elem) {\r\n    var menuElement = elem.firstElementChild;\r\n    if (elem && menuElement) {\r\n      menubarItem = new MenubarItem(menuElement, this);\r\n      menubarItem.init();\r\n      this.menubarItems.push(menubarItem);\r\n    }\r\n    elem = elem.nextElementSibling;\r\n  }\r\n  console.log(\"this.menubarItems: \", this.menubarItems);\r\n  // Use populated menuitems array to initialize firstItem and lastItem.\r\n  numItems = this.menubarItems.length;\r\n  if (numItems > 0) {\r\n    this.firstItem = this.menubarItems[ 0 ];\r\n    this.lastItem = this.menubarItems[ numItems - 1 ];\r\n    console.log(\"firstItem: \", this.firstItem);\r\n    console.log(\"lastItem: \", this.lastItem);\r\n  }\r\n  this.firstItem.domNode.tabIndex = 0;\r\n};\r\n\r\n/* FOCUS MANAGEMENT METHODS */\r\n\r\nMenubar.prototype.setFocusToItem = function (newItem) {\r\n  for (var i = 0; i < this.menubarItems.length; i++) {\r\n    var mbi = this.menubarItems[i];\r\n    mbi.domNode.tabIndex = -1;\r\n  }\r\n  newItem.domNode.focus();\r\n  newItem.domNode.tabIndex = 0;\r\n};\r\n\r\nMenubar.prototype.setFocusToFirstItem = function () {\r\n  this.setFocusToItem(this.firstItem);\r\n};\r\n\r\nMenubar.prototype.setFocusToLastItem = function () {\r\n  this.setFocusToItem(this.lastItem);\r\n};\r\n\r\nMenubar.prototype.setFocusToPreviousItem = function (currentItem) {\r\n  var index;\r\n  if (currentItem === this.firstItem) {\r\n    newItem = this.lastItem;\r\n  }\r\n  else {\r\n    index = this.menubarItems.indexOf(currentItem);\r\n    newItem = this.menubarItems[ index - 1 ];\r\n  }\r\n  this.setFocusToItem(newItem);\r\n};\r\n\r\nMenubar.prototype.setFocusToNextItem = function (currentItem) {\r\n  var index;\r\n  if (currentItem === this.lastItem) {\r\n    newItem = this.firstItem;\r\n  }\r\n  else {\r\n    index = this.menubarItems.indexOf(currentItem);\r\n    newItem = this.menubarItems[ index + 1 ];\r\n  }\r\n  this.setFocusToItem(newItem);\r\n};\r\n","/*\r\n*   This content is licensed according to the W3C Software License at\r\n*   https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\r\n*/\r\nvar MenuItem = function (domNode, menuObj) {\r\n\r\n  if (typeof popupObj !== 'object') {\r\n    popupObj = false;\r\n  }\r\n\r\n  this.domNode = domNode;\r\n  this.menu = menuObj;\r\n  this.popupMenu = false;\r\n  this.isMenubarItem = false;\r\n\r\n  this.keyCode = Object.freeze({\r\n    'TAB': 9,\r\n    'RETURN': 13,\r\n    'ESC': 27,\r\n    'SPACE': 32,\r\n    'PAGEUP': 33,\r\n    'PAGEDOWN': 34,\r\n    'END': 35,\r\n    'HOME': 36,\r\n    'LEFT': 37,\r\n    'UP': 38,\r\n    'RIGHT': 39,\r\n    'DOWN': 40\r\n  });\r\n};\r\n\r\nMenuItem.prototype.init = function () {\r\n  this.domNode.tabIndex = -1;\r\n\r\n  this.domNode.addEventListener('keydown', this.handleKeydown.bind(this));\r\n  this.domNode.addEventListener('click', this.handleClick.bind(this));\r\n  this.domNode.addEventListener('focus', this.handleFocus.bind(this));\r\n  this.domNode.addEventListener('blur', this.handleBlur.bind(this));\r\n  this.domNode.addEventListener('mouseover', this.handleMouseover.bind(this));\r\n  this.domNode.addEventListener('mouseout', this.handleMouseout.bind(this));\r\n\r\n  // Initialize flyout menu\r\n\r\n  var nextElement = this.domNode.nextElementSibling;\r\n\r\n  if (nextElement && nextElement.tagName === 'UL') {\r\n    this.popupMenu = new PopupMenu(nextElement, this);\r\n    this.popupMenu.init();\r\n  }\r\n\r\n};\r\n\r\nMenuItem.prototype.isExpanded = function () {\r\n  return this.domNode.getAttribute('aria-expanded') === 'true';\r\n};\r\n\r\n/* EVENT HANDLERS */\r\n\r\nMenuItem.prototype.handleKeydown = function (event) {\r\n  var tgt  = event.currentTarget,\r\n    char = event.key,\r\n    flag = false,\r\n    clickEvent;\r\n\r\n  function isPrintableCharacter (str) {\r\n    return str.length === 1 && str.match(/\\S/);\r\n  }\r\n\r\n  switch (event.keyCode) {\r\n    case this.keyCode.SPACE:\r\n    case this.keyCode.RETURN:\r\n      if (this.popupMenu) {\r\n        this.popupMenu.open();\r\n        this.popupMenu.setFocusToFirstItem();\r\n      }\r\n      else {\r\n\r\n        // Create simulated mouse event to mimic the behavior of ATs\r\n        // and let the event handler handleClick do the housekeeping.\r\n        try {\r\n          clickEvent = new MouseEvent('click', {\r\n            'view': window,\r\n            'bubbles': true,\r\n            'cancelable': true\r\n          });\r\n        }\r\n        catch (err) {\r\n          if (document.createEvent) {\r\n            // DOM Level 3 for IE 9+\r\n            clickEvent = document.createEvent('MouseEvents');\r\n            clickEvent.initEvent('click', true, true);\r\n          }\r\n        }\r\n        tgt.dispatchEvent(clickEvent);\r\n      }\r\n\r\n      flag = true;\r\n      break;\r\n\r\n    case this.keyCode.UP:\r\n      this.menu.setFocusToPreviousItem(this);\r\n      flag = true;\r\n      break;\r\n\r\n    case this.keyCode.DOWN:\r\n      this.menu.setFocusToNextItem(this);\r\n      flag = true;\r\n      break;\r\n\r\n    case this.keyCode.LEFT:\r\n      this.menu.setFocusToController('previous', true);\r\n      this.menu.close(true);\r\n      flag = true;\r\n      break;\r\n\r\n    case this.keyCode.RIGHT:\r\n      if (this.popupMenu) {\r\n        this.popupMenu.open();\r\n        this.popupMenu.setFocusToFirstItem();\r\n      }\r\n      else {\r\n        this.menu.setFocusToController('next', true);\r\n        this.menu.close(true);\r\n      }\r\n      flag = true;\r\n      break;\r\n\r\n    case this.keyCode.HOME:\r\n    case this.keyCode.PAGEUP:\r\n      this.menu.setFocusToFirstItem();\r\n      flag = true;\r\n      break;\r\n\r\n    case this.keyCode.END:\r\n    case this.keyCode.PAGEDOWN:\r\n      this.menu.setFocusToLastItem();\r\n      flag = true;\r\n      break;\r\n\r\n    case this.keyCode.ESC:\r\n      this.menu.setFocusToController();\r\n      this.menu.close(true);\r\n      flag = true;\r\n      break;\r\n\r\n    case this.keyCode.TAB:\r\n      this.menu.setFocusToController();\r\n      break;\r\n\r\n    default:\r\n      if (isPrintableCharacter(char)) {\r\n        this.menu.setFocusByFirstCharacter(this, char);\r\n        flag = true;\r\n      }\r\n      break;\r\n  }\r\n\r\n  if (flag) {\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n  }\r\n};\r\n\r\nMenuItem.prototype.setExpanded = function (value) {\r\n  if (value) {\r\n    this.domNode.setAttribute('aria-expanded', 'true');\r\n  }\r\n  else {\r\n    this.domNode.setAttribute('aria-expanded', 'false');\r\n  }\r\n};\r\n\r\nMenuItem.prototype.handleClick = function (event) {\r\n  this.menu.setFocusToController();\r\n  this.menu.close(true);\r\n};\r\n\r\nMenuItem.prototype.handleFocus = function (event) {\r\n  this.menu.hasFocus = true;\r\n};\r\n\r\nMenuItem.prototype.handleBlur = function (event) {\r\n  this.menu.hasFocus = false;\r\n  setTimeout(this.menu.close.bind(this.menu, false), 300);\r\n};\r\n\r\nMenuItem.prototype.handleMouseover = function (event) {\r\n  this.menu.hasHover = true;\r\n  this.menu.open();\r\n  if (this.popupMenu) {\r\n    this.popupMenu.hasHover = true;\r\n    this.popupMenu.open();\r\n  }\r\n};\r\n\r\nMenuItem.prototype.handleMouseout = function (event) {\r\n  if (this.popupMenu) {\r\n    this.popupMenu.hasHover = false;\r\n    this.popupMenu.close(true);\r\n  }\r\n\r\n  this.menu.hasHover = false;\r\n  setTimeout(this.menu.close.bind(this.menu, false), 300);\r\n};\r\n","/*\r\n*   This content is licensed according to the W3C Software License at\r\n*   https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\r\n*/\r\nvar PopupMenu = function (domNode, controllerObj) {\r\n  var elementChildren,\r\n    msgPrefix = 'PopupMenu constructor argument domNode ';\r\n\r\n  // Check whether domNode is a DOM element\r\n  if (!domNode instanceof Element) {\r\n    throw new TypeError(msgPrefix + 'is not a DOM Element.');\r\n  }\r\n  // Check whether domNode has child elements\r\n  if (domNode.childElementCount === 0) {\r\n    throw new Error(msgPrefix + 'has no element children.');\r\n  }\r\n  // Check whether domNode descendant elements have A elements\r\n  var childElement = domNode.firstElementChild;\r\n  while (childElement) {\r\n    var menuitem = childElement.firstElementChild;\r\n    if (menuitem && menuitem === 'A') {\r\n      throw new Error(msgPrefix + 'has descendant elements that are not A elements.');\r\n    }\r\n    childElement = childElement.nextElementSibling;\r\n  }\r\n\r\n  this.isMenubar = false;\r\n\r\n  this.domNode    = domNode;\r\n  this.controller = controllerObj;\r\n\r\n  this.menuitems = []; // See PopupMenu init method\r\n  this.firstChars = []; // See PopupMenu init method\r\n\r\n  this.firstItem = null; // See PopupMenu init method\r\n  this.lastItem = null; // See PopupMenu init method\r\n\r\n  this.hasFocus = false; // See MenuItem handleFocus, handleBlur\r\n  this.hasHover = false; // See PopupMenu handleMouseover, handleMouseout\r\n};\r\n\r\n/*\r\n*   @method PopupMenu.prototype.init\r\n*\r\n*   @desc\r\n*       Add domNode event listeners for mouseover and mouseout. Traverse\r\n*       domNode children to configure each menuitem and populate menuitems\r\n*       array. Initialize firstItem and lastItem properties.\r\n*/\r\nPopupMenu.prototype.init = function () {\r\n  var childElement, menuElement, menuItem, textContent, numItems, label;\r\n\r\n  // Configure the domNode itself\r\n\r\n  this.domNode.addEventListener('mouseover', this.handleMouseover.bind(this));\r\n  this.domNode.addEventListener('mouseout', this.handleMouseout.bind(this));\r\n\r\n  // Traverse the element children of domNode: configure each with\r\n  // menuitem role behavior and store reference in menuitems array.\r\n  childElement = this.domNode.firstElementChild;\r\n\r\n  while (childElement) {\r\n    menuElement = childElement.firstElementChild;\r\n\r\n    if (menuElement && menuElement.tagName === 'A') {\r\n      menuItem = new MenuItem(menuElement, this);\r\n      menuItem.init();\r\n      this.menuitems.push(menuItem);\r\n      textContent = menuElement.textContent.trim();\r\n      this.firstChars.push(textContent.substring(0, 1).toLowerCase());\r\n    }\r\n    childElement = childElement.nextElementSibling;\r\n  }\r\n\r\n  // Use populated menuitems array to initialize firstItem and lastItem.\r\n  numItems = this.menuitems.length;\r\n  if (numItems > 0) {\r\n    this.firstItem = this.menuitems[ 0 ];\r\n    this.lastItem = this.menuitems[ numItems - 1 ];\r\n  }\r\n};\r\n\r\n/* EVENT HANDLERS */\r\n\r\nPopupMenu.prototype.handleMouseover = function (event) {\r\n  this.hasHover = true;\r\n};\r\n\r\nPopupMenu.prototype.handleMouseout = function (event) {\r\n  this.hasHover = false;\r\n  setTimeout(this.close.bind(this, false), 1);\r\n};\r\n\r\n/* FOCUS MANAGEMENT METHODS */\r\n\r\nPopupMenu.prototype.setFocusToController = function (command, flag) {\r\n\r\n  if (typeof command !== 'string') {\r\n    command = '';\r\n  }\r\n\r\n  function setFocusToMenubarItem (controller, close) {\r\n    while (controller) {\r\n      if (controller.isMenubarItem) {\r\n        controller.domNode.focus();\r\n        return controller;\r\n      }\r\n      else {\r\n        if (close) {\r\n          controller.menu.close(true);\r\n        }\r\n        controller.hasFocus = false;\r\n      }\r\n      controller = controller.menu.controller;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  if (command === '') {\r\n    if (this.controller && this.controller.domNode) {\r\n      this.controller.domNode.focus();\r\n    }\r\n    return;\r\n  }\r\n\r\n  if (!this.controller.isMenubarItem) {\r\n    this.controller.domNode.focus();\r\n    this.close();\r\n\r\n    if (command === 'next') {\r\n      var menubarItem = setFocusToMenubarItem(this.controller, false);\r\n      if (menubarItem) {\r\n        menubarItem.menu.setFocusToNextItem(menubarItem, flag);\r\n      }\r\n    }\r\n  }\r\n  else {\r\n    if (command === 'previous') {\r\n      this.controller.menu.setFocusToPreviousItem(this.controller, flag);\r\n    }\r\n    else if (command === 'next') {\r\n      this.controller.menu.setFocusToNextItem(this.controller, flag);\r\n    }\r\n  }\r\n\r\n};\r\n\r\nPopupMenu.prototype.setFocusToFirstItem = function () {\r\n  this.firstItem.domNode.focus();\r\n};\r\n\r\nPopupMenu.prototype.setFocusToLastItem = function () {\r\n  this.lastItem.domNode.focus();\r\n};\r\n\r\nPopupMenu.prototype.setFocusToPreviousItem = function (currentItem) {\r\n  var index;\r\n\r\n  if (currentItem === this.firstItem) {\r\n    this.lastItem.domNode.focus();\r\n  }\r\n  else {\r\n    index = this.menuitems.indexOf(currentItem);\r\n    this.menuitems[ index - 1 ].domNode.focus();\r\n  }\r\n};\r\n\r\nPopupMenu.prototype.setFocusToNextItem = function (currentItem) {\r\n  var index;\r\n\r\n  if (currentItem === this.lastItem) {\r\n    this.firstItem.domNode.focus();\r\n  }\r\n  else {\r\n    index = this.menuitems.indexOf(currentItem);\r\n    this.menuitems[ index + 1 ].domNode.focus();\r\n  }\r\n};\r\n\r\nPopupMenu.prototype.setFocusByFirstCharacter = function (currentItem, char) {\r\n  var start, index, char = char.toLowerCase();\r\n\r\n  // Get start index for search based on position of currentItem\r\n  start = this.menuitems.indexOf(currentItem) + 1;\r\n  if (start === this.menuitems.length) {\r\n    start = 0;\r\n  }\r\n\r\n  // Check remaining slots in the menu\r\n  index = this.getIndexFirstChars(start, char);\r\n\r\n  // If not found in remaining slots, check from beginning\r\n  if (index === -1) {\r\n    index = this.getIndexFirstChars(0, char);\r\n  }\r\n\r\n  // If match was found...\r\n  if (index > -1) {\r\n    this.menuitems[ index ].domNode.focus();\r\n  }\r\n};\r\n\r\nPopupMenu.prototype.getIndexFirstChars = function (startIndex, char) {\r\n  for (var i = startIndex; i < this.firstChars.length; i++) {\r\n    if (char === this.firstChars[ i ]) {\r\n      return i;\r\n    }\r\n  }\r\n  return -1;\r\n};\r\n\r\n/* MENU DISPLAY METHODS */\r\n\r\nPopupMenu.prototype.open = function () {\r\n  // Get position and bounding rectangle of controller object's DOM node\r\n  var rect = this.controller.domNode.getBoundingClientRect();\r\n\r\n  // Set CSS properties\r\n  if (!this.controller.isMenubarItem) {\r\n    this.domNode.parentNode.style.position = 'relative';\r\n    this.domNode.style.display = 'block';\r\n    this.domNode.style.position = 'absolute';\r\n    this.domNode.style.left = rect.width + 'px';\r\n    this.domNode.style.zIndex = 100;\r\n  }\r\n  else {\r\n    this.domNode.style.display = 'block';\r\n    this.domNode.style.position = 'absolute';\r\n    this.domNode.style.top = (rect.height - 1) + 'px';\r\n    this.domNode.style.zIndex = 100;\r\n  }\r\n\r\n  this.controller.setExpanded(true);\r\n\r\n};\r\n\r\nPopupMenu.prototype.close = function (force) {\r\n\r\n  var controllerHasHover = this.controller.hasHover;\r\n\r\n  var hasFocus = this.hasFocus;\r\n\r\n  for (var i = 0; i < this.menuitems.length; i++) {\r\n    var mi = this.menuitems[i];\r\n    if (mi.popupMenu) {\r\n      hasFocus = hasFocus | mi.popupMenu.hasFocus;\r\n    }\r\n  }\r\n\r\n  if (!this.controller.isMenubarItem) {\r\n    controllerHasHover = false;\r\n  }\r\n\r\n  if (force || (!hasFocus && !this.hasHover && !controllerHasHover)) {\r\n    this.domNode.style.display = 'none';\r\n    this.domNode.style.zIndex = 0;\r\n    this.controller.setExpanded(false);\r\n  }\r\n};\r\n"]}